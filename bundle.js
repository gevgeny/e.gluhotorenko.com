!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){(function(e){var r;(function(){var n,i,o,a,f,c,s,l,u,h,b,d,p,g,y,v,m,x,R,k,w,E,M,N,P,L,_,B,S,O,C,j,q,V,T,I,W,A,J,H,G,D,F,Y,z,X,U,$,K,Z,Q,ee,te,re,ne,ie,oe,ae,fe,ce,se,le,ue,he,be,de,pe,ge,ye,ve,xe,Re,ke,we,Ee,Me,Ne,Pe,Le,_e,Be=[].slice;Me=function(){var e,t,r,n,i;for(e={},n=0,t=(i="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;n<t;n++)r=i[n],e["[object "+r+"]"]=r.toLowerCase();return function(t){var r;return r=Object.prototype.toString.call(t),e[r]||"object"}}(),U=function(e,t,r){return null==t&&(t=0),null==r&&(r=1),e<t&&(e=t),e>r&&(e=r),e},Ne=function(e){return e.length>=3?[].slice.call(e):e[0]},w=function(e){var t,r;for(e._clipped=!1,e._unclipped=e.slice(0),t=r=0;r<3;t=++r)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},a=Math.PI,xe=Math.round,M=Math.cos,B=Math.floor,ne=Math.pow,$=Math.log,ke=Math.sin,we=Math.sqrt,g=Math.atan2,Q=Math.max,p=Math.abs,s=2*a,f=a/3,i=a/180,c=180/a,(k=function(){return arguments[0]instanceof n?arguments[0]:function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,arguments,function(){})}).default=k,d=[],void 0!==e&&null!==e&&null!=e.exports&&(e.exports=k),void 0===(r=function(){return k}.apply(t,[]))||(e.exports=r),k.version="1.3.5",b={},u=[],h=!1,n=function(){function e(){var e,t,r,n,i,o,a,f,c;for(o=this,t=[],f=0,n=arguments.length;f<n;f++)null!=(e=arguments[f])&&t.push(e);if(t.length>1&&(a=t[t.length-1]),null!=b[a])o._rgb=w(b[a](Ne(t.slice(0,-1))));else{for(h||(u=u.sort(function(e,t){return t.p-e.p}),h=!0),c=0,i=u.length;c<i&&!(a=(r=u[c]).test.apply(r,t));c++);a&&(o._rgb=w(b[a].apply(b,t)))}null==o._rgb&&console.warn("unknown format: "+t),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return k(me._rgb)},e}(),k._input=b,k.brewer=x={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],x)t.push(x[e.toLowerCase()]=x[e])}(),k.colors=Pe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},D=function(){var e,t,r,n,i,a,f;return n=(t=Ne(arguments))[0],e=t[1],r=t[2],a=(n+16)/116,i=isNaN(e)?a:a+e/500,f=isNaN(r)?a:a-r/200,a=o.Yn*F(a),i=o.Xn*F(i),f=o.Zn*F(f),[_e(3.2404542*i-1.5371385*a-.4985314*f),_e(-.969266*i+1.8760108*a+.041556*f),r=_e(.0556434*i-.2040259*a+1.0572252*f),t.length>3?t[3]:1]},_e=function(e){return 255*(e<=.00304?12.92*e:1.055*ne(e,1/2.4)-.055)},F=function(e){return e>o.t1?e*e*e:o.t2*(e-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ue=function(){var e,t,r,n,i,o,a;return r=(n=Ne(arguments))[0],t=n[1],e=n[2],o=(i=ge(r,t,e))[0],[116*(a=i[1])-16,500*(o-a),200*(a-i[2])]},ye=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Le=function(e){return e>o.t3?ne(e,1/3):e/o.t2+o.t0},ge=function(){var e,t,r,n;return r=(n=Ne(arguments))[0],t=n[1],e=n[2],r=ye(r),t=ye(t),e=ye(e),[Le((.4124564*r+.3575761*t+.1804375*e)/o.Xn),Le((.2126729*r+.7151522*t+.072175*e)/o.Yn),Le((.0193339*r+.119192*t+.9503041*e)/o.Zn)]},k.lab=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["lab"]),function(){})},b.lab=D,n.prototype.lab=function(){return ue(this._rgb)},y=function(e){var t,r,n,i,o,a,f,c,s,l,u;return 2===(e=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(k(i));return n}()).length?(s=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(i.lab());return n}(),o=s[0],a=s[1],t=function(e){var t,r;return r=function(){var r,n;for(n=[],t=r=0;r<=2;t=++r)n.push(o[t]+e*(a[t]-o[t]));return n}(),k.lab.apply(k,r)}):3===e.length?(l=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(i.lab());return n}(),o=l[0],a=l[1],f=l[2],t=function(e){var t,r;return r=function(){var r,n;for(n=[],t=r=0;r<=2;t=++r)n.push((1-e)*(1-e)*o[t]+2*(1-e)*e*a[t]+e*e*f[t]);return n}(),k.lab.apply(k,r)}):4===e.length?(u=function(){var t,r,n;for(n=[],r=0,t=e.length;r<t;r++)i=e[r],n.push(i.lab());return n}(),o=u[0],a=u[1],f=u[2],c=u[3],t=function(e){var t,r;return r=function(){var r,n;for(n=[],t=r=0;r<=2;t=++r)n.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*f[t]+e*e*e*c[t]);return n}(),k.lab.apply(k,r)}):5===e.length&&(r=y(e.slice(0,3)),n=y(e.slice(2,5)),t=function(e){return e<.5?r(2*e):n(2*(e-.5))}),t},k.bezier=function(e){var t;return(t=y(e)).scale=function(){return k.scale(t)},t},k.cubehelix=function(e,t,r,n,i){var o,a,f;return null==e&&(e=300),null==t&&(t=-1.5),null==r&&(r=1),null==n&&(n=1),null==i&&(i=[0,1]),o=0,"array"===Me(i)?a=i[1]-i[0]:(a=0,i=[i,i]),(f=function(f){var c,l,u,h,b;return c=s*((e+120)/360+t*f),h=ne(i[0]+a*f,n),l=(0!==o?r[0]+f*o:r)*h*(1-h)/2,u=M(c),b=ke(c),k(w([255*(h+l*(-.14861*u+1.78277*b)),255*(h+l*(-.29227*u-.90649*b)),255*(h+l*(1.97294*u))]))}).start=function(t){return null==t?e:(e=t,f)},f.rotations=function(e){return null==e?t:(t=e,f)},f.gamma=function(e){return null==e?n:(n=e,f)},f.hue=function(e){return null==e?r:("array"===Me(r=e)?0===(o=r[1]-r[0])&&(r=r[1]):o=0,f)},f.lightness=function(e){return null==e?i:("array"===Me(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),f)},f.scale=function(){return k.scale(f)},f.hue(r),f},k.random=function(){var e,t;for("0123456789abcdef",e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(B(16*Math.random()));return new n(e)},d=[],k.interpolate=T=function(e,t,r,n){var i,o,a,f;for(null==r&&(r=.5),null==n&&(n="rgb"),"object"!==Me(e)&&(e=k(e)),"object"!==Me(t)&&(t=k(t)),a=0,o=d.length;a<o;a++)if(n===(i=d[a])[0]){f=i[1](e,t,r,n);break}if(null==f)throw"color mode "+n+" is not supported";return f.alpha(e.alpha()+r*(t.alpha()-e.alpha()))},n.prototype.interpolate=function(e,t,r){return T(this,e,t,r)},k.mix=T,n.prototype.mix=n.prototype.interpolate,b.rgb=function(){var e,t,r,n;for(e in r=[],t=Ne(arguments))n=t[e],r.push(n);return r},k.rgb=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["rgb"]),function(){})},n.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(e){var t;return t=Ne(arguments),"array"===Me(t)&&3===t.length?"rgb":4===t.length&&"number"===Me(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),b.lrgb=b.rgb,A=function(e,t,r,i){var o,a;return o=e._rgb,a=t._rgb,new n(we(ne(o[0],2)*(1-r)+ne(a[0],2)*r),we(ne(o[1],2)*(1-r)+ne(a[1],2)*r),we(ne(o[2],2)*(1-r)+ne(a[2],2)*r),i)},l=function(e){var t,r,i,o,a;for(t=1/e.length,a=[0,0,0,0],i=0,r=e.length;i<r;i++)o=e[i]._rgb,a[0]+=ne(o[0],2)*t,a[1]+=ne(o[1],2)*t,a[2]+=ne(o[2],2)*t,a[3]+=o[3]*t;return a[0]=we(a[0]),a[1]=we(a[1]),a[2]=we(a[2]),new n(a)},d.push(["lrgb",A]),k.average=function(e,t){var r,n,i,o,f,c,s,u,h,b,d,p,y;if(null==t&&(t="rgb"),h=e.length,s=(e=e.map(function(e){return k(e)})).splice(0,1)[0],"lrgb"===t)return l(e);for(u in o=[],f=0,c=0,p=s.get(t))p[u]=p[u]||0,o.push(isNaN(p[u])?0:1),"h"!==t.charAt(u)||isNaN(p[u])||(r=p[u]/180*a,f+=M(r),c+=ke(r));for(n=s.alpha(),d=0,b=e.length;d<b;d++)for(u in y=(i=e[d]).get(t),n+=i.alpha(),p)isNaN(y[u])||(p[u]+=y[u],o[u]+=1,"h"===t.charAt(u)&&(r=p[u]/180*a,f+=M(r),c+=ke(r)));for(u in p)if(p[u]=p[u]/o[u],"h"===t.charAt(u)){for(r=g(c/o[u],f/o[u])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;p[u]=r}return k(p,t).alpha(n/h)},O=function(e){var t,r;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(r=parseInt(e,16))>>16,r>>8&255,255&r,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(r=parseInt(e,16))>>24&255,r>>16&255,r>>8&255,xe((255&r)/255*100)/100];if(null!=b.css&&(t=b.css(e)))return t;throw"unknown color: "+e},fe=function(e,t){var r,n,i,o,a,f;return null==t&&(t="rgb"),a=e[0],i=e[1],n=e[2],r=e[3],a=Math.round(a),i=Math.round(i),n=Math.round(n),f=(f="000000"+(a<<16|i<<8|n).toString(16)).substr(f.length-6),o=(o="0"+xe(255*r).toString(16)).substr(o.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return f+o;case"argb":return o+f;default:return f}}()},b.hex=function(e){return O(e)},k.hex=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["hex"]),function(){})},n.prototype.hex=function(e){return null==e&&(e="rgb"),fe(this._rgb,e)},u.push({p:4,test:function(e){if(1===arguments.length&&"string"===Me(e))return"hex"}}),q=function(){var e,t,r,n,i,o,a,f,c,s,l,u,h,b;if(i=(e=Ne(arguments))[0],l=e[1],a=e[2],0===l)c=n=t=255*a;else{for(b=[0,0,0],r=[0,0,0],u=2*a-(h=a<.5?a*(1+l):a+l-a*l),i/=360,b[0]=i+1/3,b[1]=i,b[2]=i-1/3,o=f=0;f<=2;o=++f)b[o]<0&&(b[o]+=1),b[o]>1&&(b[o]-=1),6*b[o]<1?r[o]=u+6*(h-u)*b[o]:2*b[o]<1?r[o]=h:3*b[o]<2?r[o]=u+(h-u)*(2/3-b[o])*6:r[o]=u;c=(s=[xe(255*r[0]),xe(255*r[1]),xe(255*r[2])])[0],n=s[1],t=s[2]}return e.length>3?[c,n,t,e[3]]:[c,n,t]},se=function(e,t,r){var n,i,o,a,f;return void 0!==e&&e.length>=3&&(e=(a=e)[0],t=a[1],r=a[2]),e/=255,t/=255,r/=255,o=Math.min(e,t,r),i=((Q=Math.max(e,t,r))+o)/2,Q===o?(f=0,n=Number.NaN):f=i<.5?(Q-o)/(Q+o):(Q-o)/(2-Q-o),e===Q?n=(t-r)/(Q-o):t===Q?n=2+(r-e)/(Q-o):r===Q&&(n=4+(e-t)/(Q-o)),(n*=60)<0&&(n+=360),[n,f,i]},k.hsl=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["hsl"]),function(){})},b.hsl=q,n.prototype.hsl=function(){return se(this._rgb)},V=function(){var e,t,r,n,i,o,a,f,c,s,l,u,h,b,d,p,g,y;if(i=(e=Ne(arguments))[0],p=e[1],y=e[2],y*=255,0===p)c=n=t=y;else switch(360===i&&(i=0),i>360&&(i-=360),i<0&&(i+=360),a=y*(1-p),f=y*(1-p*(r=(i/=60)-(o=B(i)))),g=y*(1-p*(1-r)),o){case 0:c=(s=[y,g,a])[0],n=s[1],t=s[2];break;case 1:c=(l=[f,y,a])[0],n=l[1],t=l[2];break;case 2:c=(u=[a,y,g])[0],n=u[1],t=u[2];break;case 3:c=(h=[a,f,y])[0],n=h[1],t=h[2];break;case 4:c=(b=[g,a,y])[0],n=b[1],t=b[2];break;case 5:c=(d=[y,a,f])[0],n=d[1],t=d[2]}return[c,n,t,e.length>3?e[3]:1]},le=function(){var e,t,r,n,i,o,a,f,c;return o=(a=Ne(arguments))[0],r=a[1],e=a[2],i=Math.min(o,r,e),t=(Q=Math.max(o,r,e))-i,c=Q/255,0===Q?(n=Number.NaN,f=0):(f=t/Q,o===Q&&(n=(r-e)/t),r===Q&&(n=2+(e-o)/t),e===Q&&(n=4+(o-r)/t),(n*=60)<0&&(n+=360)),[n,f,c]},k.hsv=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["hsv"]),function(){})},b.hsv=V,n.prototype.hsv=function(){return le(this._rgb)},te=function(e){return"number"===Me(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},de=function(){var e;return((e=Ne(arguments))[0]<<16)+(e[1]<<8)+e[2]},k.num=function(e){return new n(e,"num")},n.prototype.num=function(e){return null==e&&(e="rgb"),de(this._rgb,e)},b.num=te,u.push({p:1,test:function(e){if(1===arguments.length&&"number"===Me(e)&&e>=0&&e<=16777215)return"num"}}),S=function(){var e,t,r,n,i,o,a,f,c,s,l,u,h,b,d,p,g,y,v,m;if(f=(r=Ne(arguments))[0],i=r[1],t=r[2],a=a/100*255,e=255*(i/=100),0===i)u=a=n=t;else switch(360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360),l=(s=t*(1-i))+e*(1-(o=(f/=60)-(c=B(f)))),v=s+e*o,m=s+e,c){case 0:u=(h=[m,v,s])[0],a=h[1],n=h[2];break;case 1:u=(b=[l,m,s])[0],a=b[1],n=b[2];break;case 2:u=(d=[s,m,v])[0],a=d[1],n=d[2];break;case 3:u=(p=[s,l,m])[0],a=p[1],n=p[2];break;case 4:u=(g=[v,s,m])[0],a=g[1],n=g[2];break;case 5:u=(y=[m,s,l])[0],a=y[1],n=y[2]}return[u,a,n,r.length>3?r[3]:1]},ae=function(){var e,t,r,n,i,o,a,f,c;return f=(c=Ne(arguments))[0],i=c[1],t=c[2],a=Math.min(f,i,t),r=100*(n=(Q=Math.max(f,i,t))-a)/255,e=a/(255-n)*100,0===n?o=Number.NaN:(f===Q&&(o=(i-t)/n),i===Q&&(o=2+(t-f)/n),t===Q&&(o=4+(f-i)/n),(o*=60)<0&&(o+=360)),[o,r,e]},k.hcg=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["hcg"]),function(){})},b.hcg=S,n.prototype.hcg=function(){return ae(this._rgb)},N=function(e){var t,r,n,i,o,a,f,c;if(e=e.toLowerCase(),null!=k.colors&&k.colors[e])return O(k.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(f=o.slice(1,4),i=a=0;a<=2;i=++a)f[i]=+f[i];f[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(f=o.slice(1,5),i=c=0;c<=3;i=++c)f[i]=+f[i];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(f=o.slice(1,4),i=t=0;t<=2;i=++t)f[i]=xe(2.55*f[i]);f[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(f=o.slice(1,5),i=r=0;r<=2;i=++r)f[i]=xe(2.55*f[i]);f[3]=+f[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(f=q(n))[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((n=o.slice(1,4))[1]*=.01,n[2]*=.01,(f=q(n))[3]=+o[4]);return f},oe=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(xe).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(xe).join(",")+","+e[3]+")":void 0},ve=function(e){return xe(100*e)/100},j=function(e,t){var r;return r=t<1?"hsla":"hsl",e[0]=ve(e[0]||0),e[1]=ve(100*e[1])+"%",e[2]=ve(100*e[2])+"%","hsla"===r&&(e[3]=t),r+"("+e.join(",")+")"},b.css=function(e){return N(e)},k.css=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["css"]),function(){})},n.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?oe(this._rgb):"hsl"===e.slice(0,3)?j(this.hsl(),this.alpha()):void 0},b.named=function(e){return O(Pe[e])},u.push({p:5,test:function(e){if(1===arguments.length&&null!=Pe[e])return"named"}}),n.prototype.name=function(e){var t,r;for(r in arguments.length&&(Pe[e]&&(this._rgb=O(Pe[e])),this._rgb[3]=1),t=this.hex(),Pe)if(t===Pe[r])return r;return t},Y=function(){var e,t,r,n;return r=(n=Ne(arguments))[0],e=n[1],t=n[2],[r,M(t*=i)*e,ke(t)*e]},z=function(){var e,t,r,n,i,o,a,f,c;return a=(r=Ne(arguments))[0],i=r[1],o=r[2],e=(f=Y(a,i,o))[0],t=f[1],n=f[2],[(c=D(e,t,n))[0],c[1],n=c[2],r.length>3?r[3]:1]},G=function(){var e,t,r,n,i,o;return i=(o=Ne(arguments))[0],e=o[1],t=o[2],r=we(e*e+t*t),n=(g(t,e)*c+360)%360,0===xe(1e4*r)&&(n=Number.NaN),[i,r,n]},he=function(){var e,t,r,n,i,o,a;return i=(o=Ne(arguments))[0],r=o[1],t=o[2],n=(a=ue(i,r,t))[0],e=a[1],t=a[2],G(n,e,t)},k.lch=function(){var e;return e=Ne(arguments),new n(e,"lch")},k.hcl=function(){var e;return e=Ne(arguments),new n(e,"hcl")},b.lch=z,b.hcl=function(){var e,t,r,n;return t=(n=Ne(arguments))[0],e=n[1],r=n[2],z([r,e,t])},n.prototype.lch=function(){return he(this._rgb)},n.prototype.hcl=function(){return he(this._rgb).reverse()},ie=function(e){var t,r,n,i,o,a;return null==e&&(e="rgb"),o=(a=Ne(arguments))[0],n=a[1],t=a[2],n/=255,t/=255,[(1-(o/=255)-(i=1-Math.max(o,Math.max(n,t))))*(r=i<1?1/(1-i):0),(1-n-i)*r,(1-t-i)*r,i]},E=function(){var e,t,r,n,i,o;return r=(t=Ne(arguments))[0],i=t[1],o=t[2],n=t[3],e=t.length>4?t[4]:1,1===n?[0,0,0,e]:[r>=1?0:255*(1-r)*(1-n),i>=1?0:255*(1-i)*(1-n),o>=1?0:255*(1-o)*(1-n),e]},b.cmyk=function(){return E(Ne(arguments))},k.cmyk=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["cmyk"]),function(){})},n.prototype.cmyk=function(){return ie(this._rgb)},b.gl=function(){var e,t,r,n,i;for(n=function(){var e,r;for(t in r=[],e=Ne(arguments))i=e[t],r.push(i);return r}.apply(this,arguments),e=r=0;r<=2;e=++r)n[e]*=255;return n},k.gl=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["gl"]),function(){})},n.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},be=function(e,t,r){var n;return e=(n=Ne(arguments))[0],t=n[1],r=n[2],.2126*(e=K(e))+.7152*(t=K(t))+.0722*(r=K(r))},K=function(e){return(e/=255)<=.03928?e/12.92:ne((e+.055)/1.055,2.4)},H=function(e,t,r,i){var o,a;return o=e._rgb,a=t._rgb,new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["rgb",H]),n.prototype.luminance=function(e,t){var r,n,i,o;return null==t&&(t="rgb"),arguments.length?(0===e?this._rgb=[0,0,0,this._rgb[3]]:1===e?this._rgb=[255,255,255,this._rgb[3]]:(n=1e-7,i=20,o=function(r,a){var f,c;return f=(c=r.interpolate(a,.5,t)).luminance(),Math.abs(e-f)<n||!i--?c:f>e?o(r,c):o(c,a)},r=be(this._rgb),this._rgb=(r>e?o(k("black"),this):o(this,k("white"))).rgba()),this):be(this._rgb)},Ee=function(e){var t,r,n,i;return(i=e/100)<66?(n=255,r=-155.25485562709179-.44596950469579133*(r=i-2)+104.49216199393888*$(r),t=i<20?0:.8274096064007395*(t=i-10)-254.76935184120902+115.67994401066147*$(t)):(n=351.97690566805693+.114206453784165*(n=i-55)-40.25366309332127*$(n),r=325.4494125711974+.07943456536662342*(r=i-50)-28.0852963507957*$(r),t=255),[n,r,t]},pe=function(){var e,t,r,n,i,o,a;for(n=(i=Ne(arguments))[0],i[1],e=i[2],r=1e3,t=4e4,.4;t-r>.4;)(o=Ee(a=.5*(t+r)))[2]/o[0]>=e/n?t=a:r=a;return xe(a)},k.temperature=k.kelvin=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["temperature"]),function(){})},b.temperature=b.kelvin=b.K=Ee,n.prototype.temperature=function(){return pe(this._rgb)},n.prototype.kelvin=n.prototype.temperature,k.contrast=function(e,t){var r,i,o,a;return"string"!==(o=Me(e))&&"number"!==o||(e=new n(e)),"string"!==(a=Me(t))&&"number"!==a||(t=new n(t)),(r=e.luminance())>(i=t.luminance())?(r+.05)/(i+.05):(i+.05)/(r+.05)},k.distance=function(e,t,r){var i,o,a,f,c,s,l;for(o in null==r&&(r="lab"),"string"!==(c=Me(e))&&"number"!==c||(e=new n(e)),"string"!==(s=Me(t))&&"number"!==s||(t=new n(t)),a=e.get(r),f=t.get(r),l=0,a)l+=(i=(a[o]||0)-(f[o]||0))*i;return Math.sqrt(l)},k.deltaE=function(e,t,r,i){var o,f,c,s,l,u,h,b,d,y,v,m,x,R,k,w,E,N,P,L,_,B,S,O;for(null==r&&(r=1),null==i&&(i=1),"string"!==(k=Me(e))&&"number"!==k||(e=new n(e)),"string"!==(w=Me(t))&&"number"!==w||(t=new n(t)),o=(E=e.lab())[0],c=E[1],l=E[2],f=(N=t.lab())[0],s=N[1],u=N[2],h=we(c*c+l*l),b=we(s*s+u*u),L=o<16?.511:.040975*o/(1+.01765*o),P=.0638*h/(1+.0131*h)+.638,R=h<1e-6?0:180*g(l,c)/a;R<0;)R+=360;for(;R>=360;)R-=360;return _=R>=164&&R<=345?.56+p(.2*M(a*(R+168)/180)):.36+p(.4*M(a*(R+35)/180)),x=we((d=h*h*h*h)/(d+1900)),we((B=(o-f)/(r*L))*B+(S=(m=h-b)/(i*P))*S+((y=c-s)*y+(v=l-u)*v-m*m)/((O=P*(x*_+1-x))*O))},n.prototype.get=function(e){var t,r,n,i,o;return this,n=(i=e.split("."))[0],t=i[1],o=this[n](),t?(r=n.indexOf(t))>-1?o[r]:console.warn("unknown channel "+t+" in mode "+n):o},n.prototype.set=function(e,t){var r,n,i,o,a;if(this,i=(o=e.split("."))[0],r=o[1])if(a=this[i](),(n=i.indexOf(r))>-1)if("string"===Me(t))switch(t.charAt(0)){case"+":case"-":a[n]+=+t;break;case"*":a[n]*=+t.substr(1);break;case"/":a[n]/=+t.substr(1);break;default:a[n]=+t}else a[n]=t;else console.warn("unknown channel "+r+" in mode "+i);else a=t;return k(a,i).alpha(this.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(e){return arguments.length?k.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},n.prototype.darken=function(e){var t;return null==e&&(e=1),this,(t=this.lab())[0]-=o.Kn*e,k.lab(t).alpha(this.alpha())},n.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(e){var t;return null==e&&(e=1),this,(t=this.lch())[1]+=e*o.Kn,t[1]<0&&(t[1]=0),k.lch(t).alpha(this.alpha())},n.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},n.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),k(t[0]*e,t[1]*e,t[2]*e,e)},ee=function(e,t){return e*t/255},P=function(e,t){return e>t?t:e},X=function(e,t){return e>t?e:t},Re=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},re=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},R=function(e,t){return 255*(1-(1-t/255)/(e/255))},L=function(e,t){return 255===e?255:(e=t/255*255/(1-e/255))>255?255:e},(v=function(e,t,r){if(!v[r])throw"unknown blend mode "+r;return v[r](e,t)}).normal=(m=function(e){return function(t,r){var n,i;return n=k(r).rgb(),i=k(t).rgb(),k(e(n,i),"rgb")}})((_=function(e){return function(t,r){var n,i,o;for(o=[],n=i=0;i<=3;n=++i)o[n]=e(t[n],r[n]);return o}})(function(e,t){return e})),v.multiply=m(_(ee)),v.screen=m(_(Re)),v.overlay=m(_(re)),v.darken=m(_(P)),v.lighten=m(_(X)),v.dodge=m(_(L)),v.burn=m(_(R)),k.blend=v,k.analyze=function(e){var t,r,n,i;for(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,t=e.length;r<t;r++)null==(i=e[r])||isNaN(i)||(n.values.push(i),n.sum+=i,i<n.min&&(n.min=i),i>n.max&&(n.max=i),n.count+=1);return n.domain=[n.min,n.max],n.limits=function(e,t){return k.limits(n,e,t)},n},k.scale=function(e,t){var r,n,i,o,a,f,c,s,l,u,h,b,d,p,g,y,v,m,x,R,w;return l="rgb",u=k("#ccc"),p=0,!1,a=[0,1],d=[],b=[0,0],r=!1,i=[],h=!1,s=0,c=1,o=!1,n={},g=!0,f=1,R=function(e){var t,r,n,o,a,f;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Me(e)&&null!=k.brewer&&(e=k.brewer[e]||k.brewer[e.toLowerCase()]||e),"array"===Me(e)){for(t=n=0,o=(e=e.slice(0)).length-1;0<=o?n<=o:n>=o;t=0<=o?++n:--n)r=e[t],"string"===Me(r)&&(e[t]=k(r));for(d.length=0,t=f=0,a=e.length-1;0<=a?f<=a:f>=a;t=0<=a?++f:--f)d.push(t/(e.length-1))}return x(),i=e},v=function(e){var t,n;if(null!=r){for(n=r.length-1,t=0;t<n&&e>=r[t];)t++;return t-1}return 0},w=function(e){return e},function(e){var t,n,i,o,a;return a=e,r.length>2&&(o=r.length-1,t=v(e),i=r[0]+(r[1]-r[0])*(0+.5*p),n=r[o-1]+(r[o]-r[o-1])*(1-.5*p),a=s+(r[t]+.5*(r[t+1]-r[t])-i)/(n-i)*(c-s)),a},m=function(e,t){var o,a,h,p,y,m,x;if(null==t&&(t=!1),isNaN(e))return u;if(x=t?e:r&&r.length>2?v(e)/(r.length-2):c!==s?(e-s)/(c-s):1,t||(x=w(x)),1!==f&&(x=ne(x,f)),x=b[0]+x*(1-b[0]-b[1]),x=Math.min(1,Math.max(0,x)),h=Math.floor(1e4*x),g&&n[h])o=n[h];else{if("array"===Me(i))for(a=p=0,m=d.length-1;0<=m?p<=m:p>=m;a=0<=m?++p:--p){if(x<=(y=d[a])){o=i[a];break}if(x>=y&&a===d.length-1){o=i[a];break}if(x>y&&x<d[a+1]){x=(x-y)/(d[a+1]-y),o=k.interpolate(i[a],i[a+1],x,l);break}}else"function"===Me(i)&&(o=i(x));g&&(n[h]=o)}return o},x=function(){return n={}},R(e),(y=function(e){var t;return t=k(m(e)),h&&t[h]?t[h]():t}).classes=function(e){var t;return null!=e?("array"===Me(e)?(r=e,a=[e[0],e[e.length-1]]):(t=k.analyze(a),r=0===e?[t.min,t.max]:k.limits(t,"e",e)),y):r},y.domain=function(e){var t,r,n,o,f,l,u;if(!arguments.length)return a;if(s=e[0],c=e[e.length-1],d=[],n=i.length,e.length===n&&s!==c)for(f=0,o=e.length;f<o;f++)r=e[f],d.push((r-s)/(c-s));else for(t=u=0,l=n-1;0<=l?u<=l:u>=l;t=0<=l?++u:--u)d.push(t/(n-1));return a=[s,c],y},y.mode=function(e){return arguments.length?(l=e,x(),y):l},y.range=function(e,t){return R(e),y},y.out=function(e){return h=e,y},y.spread=function(e){return arguments.length?(p=e,y):p},y.correctLightness=function(e){return null==e&&(e=!0),o=e,x(),w=o?function(e){var t,r,n,i,o,a,f,c,s;for(t=m(0,!0).lab()[0],r=m(1,!0).lab()[0],f=t>r,n=m(e,!0).lab()[0],i=n-(o=t+(r-t)*e),c=0,s=1,a=20;Math.abs(i)>.01&&a-- >0;)f&&(i*=-1),i<0?(c=e,e+=.5*(s-e)):(s=e,e+=.5*(c-e)),n=m(e,!0).lab()[0],i=n-o;return e}:function(e){return e},y},y.padding=function(e){return null!=e?("number"===Me(e)&&(e=[e,e]),b=e,y):b},y.colors=function(t,n){var o,f,c,s,l,u,h,b;if(arguments.length<2&&(n="hex"),l=[],0===arguments.length)l=i.slice(0);else if(1===t)l=[y(.5)];else if(t>1)f=a[0],o=a[1]-f,l=function(){u=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)u.push(e);return u}.apply(this).map(function(e){return y(f+e/(t-1)*o)});else{if(e=[],h=[],r&&r.length>2)for(c=b=1,s=r.length;1<=s?b<s:b>s;c=1<=s?++b:--b)h.push(.5*(r[c-1]+r[c]));else h=a;l=h.map(function(e){return y(e)})}return k[n]&&(l=l.map(function(e){return e[n]()})),l},y.cache=function(e){return null!=e?(g=e,y):g},y.gamma=function(e){return null!=e?(f=e,y):f},y},null==k.scales&&(k.scales={}),k.scales.cool=function(){return k.scale([k.hsl(180,1,.9),k.hsl(250,.7,.4)])},k.scales.hot=function(){return k.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},k.analyze=function(e,t,r){var n,i,o,a,f,c;if(f={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),n=function(e){null==e||isNaN(e)||(f.values.push(e),f.sum+=e,e<f.min&&(f.min=e),e>f.max&&(f.max=e),f.count+=1)},c=function(e,i){if(r(e,i))return null!=t&&"function"===Me(t)?n(t(e)):null!=t&&"string"===Me(t)||"number"===Me(t)?n(e[t]):n(e)},"array"===Me(e))for(a=0,o=e.length;a<o;a++)c(e[a]);else for(i in e)c(e[i],i);return f.domain=[f.min,f.max],f.limits=function(e,t){return k.limits(f,e,t)},f},k.limits=function(e,t,r){var n,i,o,a,f,c,s,l,u,h,b,d,g,y,v,m,x,R,w,E,M,N,P,L,_,S,O,C,j,q,V,T,I,W,A,J,H,G,D,F,Y,z,X,U,K,Z,ee,te,re,ie,oe,ae,fe,ce,se;if(null==t&&(t="equal"),null==r&&(r=7),"array"===Me(e)&&(e=k.analyze(e)),_=e.min,Q=e.max,e.sum,ce=e.values.sort(function(e,t){return e-t}),1===r)return[_,Q];if(P=[],"c"===t.substr(0,1)&&(P.push(_),P.push(Q)),"e"===t.substr(0,1)){for(P.push(_),E=V=1,A=r-1;1<=A?V<=A:V>=A;E=1<=A?++V:--V)P.push(_+E/r*(Q-_));P.push(Q)}else if("l"===t.substr(0,1)){if(_<=0)throw"Logarithmic scales are only possible for values > 0";for(S=Math.LOG10E*$(_),L=Math.LOG10E*$(Q),P.push(_),E=se=1,J=r-1;1<=J?se<=J:se>=J;E=1<=J?++se:--se)P.push(ne(10,S+E/r*(L-S)));P.push(Q)}else if("q"===t.substr(0,1)){for(P.push(_),E=n=1,z=r-1;1<=z?n<=z:n>=z;E=1<=z?++n:--n)T=(ce.length-1)*E/r,(I=B(T))===T?P.push(ce[I]):(W=T-I,P.push(ce[I]*(1-W)+ce[I+1]*W));P.push(Q)}else if("k"===t.substr(0,1)){for(C=ce.length,y=new Array(C),R=new Array(r),ie=!0,j=0,m=null,(m=[]).push(_),E=i=1,X=r-1;1<=X?i<=X:i>=X;E=1<=X?++i:--i)m.push(_+E/r*(Q-_));for(m.push(Q);ie;){for(M=o=0,U=r-1;0<=U?o<=U:o>=U;M=0<=U?++o:--o)R[M]=0;for(E=a=0,K=C-1;0<=K?a<=K:a>=K;E=0<=K?++a:--a){for(fe=ce[E],O=Number.MAX_VALUE,M=f=0,Z=r-1;0<=Z?f<=Z:f>=Z;M=0<=Z?++f:--f)(w=p(m[M]-fe))<O&&(O=w,v=M);R[v]++,y[E]=v}for(q=new Array(r),M=c=0,ee=r-1;0<=ee?c<=ee:c>=ee;M=0<=ee?++c:--c)q[M]=null;for(E=s=0,te=C-1;0<=te?s<=te:s>=te;E=0<=te?++s:--s)null===q[x=y[E]]?q[x]=ce[E]:q[x]+=ce[E];for(M=l=0,re=r-1;0<=re?l<=re:l>=re;M=0<=re?++l:--l)q[M]*=1/R[M];for(ie=!1,M=u=0,H=r-1;0<=H?u<=H:u>=H;M=0<=H?++u:--u)if(q[M]!==m[E]){ie=!0;break}m=q,++j>200&&(ie=!1)}for(N={},M=h=0,G=r-1;0<=G?h<=G:h>=G;M=0<=G?++h:--h)N[M]=[];for(E=b=0,D=C-1;0<=D?b<=D:b>=D;E=0<=D?++b:--b)N[x=y[E]].push(ce[E]);for(oe=[],M=d=0,F=r-1;0<=F?d<=F:d>=F;M=0<=F?++d:--d)oe.push(N[M][0]),oe.push(N[M][N[M].length-1]);for(oe=oe.sort(function(e,t){return e-t}),P.push(oe[0]),E=g=1,Y=oe.length-1;g<=Y;E=g+=2)ae=oe[E],isNaN(ae)||-1!==P.indexOf(ae)||P.push(ae)}return P},C=function(e,t,r){var n,i,o,a;return e=(n=Ne(arguments))[0],t=n[1],r=n[2],isNaN(e)&&(e=0),(e/=360)<1/3?o=1-((i=(1-t)/3)+(a=(1+t*M(s*e)/M(f-s*e))/3)):e<2/3?i=1-((a=(1-t)/3)+(o=(1+t*M(s*(e-=1/3))/M(f-s*e))/3)):a=1-((o=(1-t)/3)+(i=(1+t*M(s*(e-=2/3))/M(f-s*e))/3)),[255*(a=U(r*a*3)),255*(o=U(r*o*3)),255*(i=U(r*i*3)),n.length>3?n[3]:1]},ce=function(){var e,t,r,n,i,o,a;return i=(o=Ne(arguments))[0],t=o[1],e=o[2],s=2*Math.PI,i/=255,t/=255,e/=255,0===(a=1-Math.min(i,t,e)/(n=(i+t+e)/3))?r=0:(r=(i-t+(i-e))/2,r/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),r=Math.acos(r),e>t&&(r=s-r),r/=s),[360*r,a,n]},k.hsi=function(){return function(e,t,r){r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return Object(i)===i?i:n}(n,Be.call(arguments).concat(["hsi"]),function(){})},b.hsi=C,n.prototype.hsi=function(){return ce(this._rgb)},I=function(e,t,r,n){var i,o,a,f,c,s,l,u,h,b;return"hsl"===n?(h=e.hsl(),b=t.hsl()):"hsv"===n?(h=e.hsv(),b=t.hsv()):"hcg"===n?(h=e.hcg(),b=t.hcg()):"hsi"===n?(h=e.hsi(),b=t.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",h=e.hcl(),b=t.hcl()),"h"===n.substr(0,1)&&(o=h[0],l=h[1],f=h[2],a=b[0],u=b[1],c=b[2]),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?i=Number.NaN:(i=a,1!==f&&0!==f||"hsv"===n||(s=u)):(i=o,1!==c&&0!==c||"hsv"===n||(s=l)):i=o+r*(a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o),null==s&&(s=l+r*(u-l)),k[n](i,s,f+r*(c-f))},J=function(e,t,r,n){var i,o;return i=e.num(),o=t.num(),k.num(i+(o-i)*r,"num")},(d=d.concat(function(){var e,t,r,n;for(n=[],t=0,e=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)Z=r[t],n.push([Z,I]);return n}())).push(["num",J]),W=function(e,t,r,i){var o,a;return o=e.lab(),a=t.lab(),new n(o[0]+r*(a[0]-o[0]),o[1]+r*(a[1]-o[1]),o[2]+r*(a[2]-o[2]),i)},d.push(["lab",W])}).call(this)}).call(this,r(4)(e))},function(e,t,r){function n(){this.vertices=null,this.edges=null,this.cells=null,this.toRecycle=null,this.beachsectionJunkyard=[],this.circleEventJunkyard=[],this.vertexJunkyard=[],this.edgeJunkyard=[],this.cellJunkyard=[]}n.prototype.reset=function(){if(this.beachline||(this.beachline=new this.RBTree),this.beachline.root)for(var e=this.beachline.getFirst(this.beachline.root);e;)this.beachsectionJunkyard.push(e),e=e.rbNext;this.beachline.root=null,this.circleEvents||(this.circleEvents=new this.RBTree),this.circleEvents.root=this.firstCircleEvent=null,this.vertices=[],this.edges=[],this.cells=[]},n.prototype.sqrt=Math.sqrt,n.prototype.abs=Math.abs,n.prototype.ε=n.ε=1e-9,n.prototype.invε=n.invε=1/n.ε,n.prototype.equalWithEpsilon=function(e,t){return this.abs(e-t)<1e-9},n.prototype.greaterThanWithEpsilon=function(e,t){return e-t>1e-9},n.prototype.greaterThanOrEqualWithEpsilon=function(e,t){return t-e<1e-9},n.prototype.lessThanWithEpsilon=function(e,t){return t-e>1e-9},n.prototype.lessThanOrEqualWithEpsilon=function(e,t){return e-t<1e-9},n.prototype.RBTree=function(){this.root=null},n.prototype.RBTree.prototype.rbInsertSuccessor=function(e,t){var r,n,i;if(e){if(t.rbPrevious=e,t.rbNext=e.rbNext,e.rbNext&&(e.rbNext.rbPrevious=t),e.rbNext=t,e.rbRight){for(e=e.rbRight;e.rbLeft;)e=e.rbLeft;e.rbLeft=t}else e.rbRight=t;r=e}else this.root?(e=this.getFirst(this.root),t.rbPrevious=null,t.rbNext=e,e.rbPrevious=t,e.rbLeft=t,r=e):(t.rbPrevious=t.rbNext=null,this.root=t,r=null);for(t.rbLeft=t.rbRight=null,t.rbParent=r,t.rbRed=!0,e=t;r&&r.rbRed;)r===(n=r.rbParent).rbLeft?(i=n.rbRight)&&i.rbRed?(r.rbRed=i.rbRed=!1,n.rbRed=!0,e=n):(e===r.rbRight&&(this.rbRotateLeft(r),r=(e=r).rbParent),r.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n)):(i=n.rbLeft)&&i.rbRed?(r.rbRed=i.rbRed=!1,n.rbRed=!0,e=n):(e===r.rbLeft&&(this.rbRotateRight(r),r=(e=r).rbParent),r.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n)),r=e.rbParent;this.root.rbRed=!1},n.prototype.RBTree.prototype.rbRemoveNode=function(e){e.rbNext&&(e.rbNext.rbPrevious=e.rbPrevious),e.rbPrevious&&(e.rbPrevious.rbNext=e.rbNext),e.rbNext=e.rbPrevious=null;var t,r,n=e.rbParent,i=e.rbLeft,o=e.rbRight;if(t=i?o?this.getFirst(o):i:o,n?n.rbLeft===e?n.rbLeft=t:n.rbRight=t:this.root=t,i&&o?(r=t.rbRed,t.rbRed=e.rbRed,t.rbLeft=i,i.rbParent=t,t!==o?(n=t.rbParent,t.rbParent=e.rbParent,e=t.rbRight,n.rbLeft=e,t.rbRight=o,o.rbParent=t):(t.rbParent=n,n=t,e=t.rbRight)):(r=e.rbRed,e=t),e&&(e.rbParent=n),!r)if(e&&e.rbRed)e.rbRed=!1;else{var a;do{if(e===this.root)break;if(e===n.rbLeft){if((a=n.rbRight).rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateLeft(n),a=n.rbRight),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbRight&&a.rbRight.rbRed||(a.rbLeft.rbRed=!1,a.rbRed=!0,this.rbRotateRight(a),a=n.rbRight),a.rbRed=n.rbRed,n.rbRed=a.rbRight.rbRed=!1,this.rbRotateLeft(n),e=this.root;break}}else if((a=n.rbLeft).rbRed&&(a.rbRed=!1,n.rbRed=!0,this.rbRotateRight(n),a=n.rbLeft),a.rbLeft&&a.rbLeft.rbRed||a.rbRight&&a.rbRight.rbRed){a.rbLeft&&a.rbLeft.rbRed||(a.rbRight.rbRed=!1,a.rbRed=!0,this.rbRotateLeft(a),a=n.rbLeft),a.rbRed=n.rbRed,n.rbRed=a.rbLeft.rbRed=!1,this.rbRotateRight(n),e=this.root;break}a.rbRed=!0,e=n,n=n.rbParent}while(!e.rbRed);e&&(e.rbRed=!1)}},n.prototype.RBTree.prototype.rbRotateLeft=function(e){var t=e,r=e.rbRight,n=t.rbParent;n?n.rbLeft===t?n.rbLeft=r:n.rbRight=r:this.root=r,r.rbParent=n,t.rbParent=r,t.rbRight=r.rbLeft,t.rbRight&&(t.rbRight.rbParent=t),r.rbLeft=t},n.prototype.RBTree.prototype.rbRotateRight=function(e){var t=e,r=e.rbLeft,n=t.rbParent;n?n.rbLeft===t?n.rbLeft=r:n.rbRight=r:this.root=r,r.rbParent=n,t.rbParent=r,t.rbLeft=r.rbRight,t.rbLeft&&(t.rbLeft.rbParent=t),r.rbRight=t},n.prototype.RBTree.prototype.getFirst=function(e){for(;e.rbLeft;)e=e.rbLeft;return e},n.prototype.RBTree.prototype.getLast=function(e){for(;e.rbRight;)e=e.rbRight;return e},n.prototype.Diagram=function(e){this.site=e},n.prototype.Cell=function(e){this.site=e,this.halfedges=[],this.closeMe=!1},n.prototype.Cell.prototype.init=function(e){return this.site=e,this.halfedges=[],this.closeMe=!1,this},n.prototype.createCell=function(e){var t=this.cellJunkyard.pop();return t?t.init(e):new this.Cell(e)},n.prototype.Cell.prototype.prepareHalfedges=function(){for(var e,t=this.halfedges,r=t.length;r--;)(e=t[r].edge).vb&&e.va||t.splice(r,1);return t.sort(function(e,t){return t.angle-e.angle}),t.length},n.prototype.Cell.prototype.getNeighborIds=function(){for(var e,t=[],r=this.halfedges.length;r--;)null!==(e=this.halfedges[r].edge).lSite&&e.lSite.voronoiId!=this.site.voronoiId?t.push(e.lSite.voronoiId):null!==e.rSite&&e.rSite.voronoiId!=this.site.voronoiId&&t.push(e.rSite.voronoiId);return t},n.prototype.Cell.prototype.getBbox=function(){for(var e,t,r,n=this.halfedges,i=n.length,o=1/0,a=1/0,f=-1/0,c=-1/0;i--;)t=(e=n[i].getStartpoint()).x,r=e.y,t<o&&(o=t),r<a&&(a=r),t>f&&(f=t),r>c&&(c=r);return{x:o,y:a,width:f-o,height:c-a}},n.prototype.Cell.prototype.pointIntersection=function(e,t){for(var r,n,i,o,a=this.halfedges,f=a.length;f--;){if(n=(r=a[f]).getStartpoint(),i=r.getEndpoint(),!(o=(t-n.y)*(i.x-n.x)-(e-n.x)*(i.y-n.y)))return 0;if(o>0)return-1}return 1},n.prototype.Vertex=function(e,t){this.x=e,this.y=t},n.prototype.Edge=function(e,t){this.lSite=e,this.rSite=t,this.va=this.vb=null},n.prototype.Halfedge=function(e,t,r){if(this.site=t,this.edge=e,r)this.angle=Math.atan2(r.y-t.y,r.x-t.x);else{var n=e.va,i=e.vb;this.angle=e.lSite===t?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}},n.prototype.createHalfedge=function(e,t,r){return new this.Halfedge(e,t,r)},n.prototype.Halfedge.prototype.getStartpoint=function(){return this.edge.lSite===this.site?this.edge.va:this.edge.vb},n.prototype.Halfedge.prototype.getEndpoint=function(){return this.edge.lSite===this.site?this.edge.vb:this.edge.va},n.prototype.createVertex=function(e,t){var r=this.vertexJunkyard.pop();return r?(r.x=e,r.y=t):r=new this.Vertex(e,t),this.vertices.push(r),r},n.prototype.createEdge=function(e,t,r,n){var i=this.edgeJunkyard.pop();return i?(i.lSite=e,i.rSite=t,i.va=i.vb=null):i=new this.Edge(e,t),this.edges.push(i),r&&this.setEdgeStartpoint(i,e,t,r),n&&this.setEdgeEndpoint(i,e,t,n),this.cells[e.voronoiId].halfedges.push(this.createHalfedge(i,e,t)),this.cells[t.voronoiId].halfedges.push(this.createHalfedge(i,t,e)),i},n.prototype.createBorderEdge=function(e,t,r){var n=this.edgeJunkyard.pop();return n?(n.lSite=e,n.rSite=null):n=new this.Edge(e,null),n.va=t,n.vb=r,this.edges.push(n),n},n.prototype.setEdgeStartpoint=function(e,t,r,n){e.va||e.vb?e.lSite===r?e.vb=n:e.va=n:(e.va=n,e.lSite=t,e.rSite=r)},n.prototype.setEdgeEndpoint=function(e,t,r,n){this.setEdgeStartpoint(e,r,t,n)},n.prototype.Beachsection=function(){},n.prototype.createBeachsection=function(e){var t=this.beachsectionJunkyard.pop();return t||(t=new this.Beachsection),t.site=e,t},n.prototype.leftBreakPoint=function(e,t){var r=e.site,n=r.x,i=r.y,o=i-t;if(!o)return n;var a=e.rbPrevious;if(!a)return-1/0;var f=(r=a.site).x,c=r.y,s=c-t;if(!s)return f;var l=f-n,u=1/o-1/s,h=l/s;return u?(-h+this.sqrt(h*h-2*u*(l*l/(-2*s)-c+s/2+i-o/2)))/u+n:(n+f)/2},n.prototype.rightBreakPoint=function(e,t){var r=e.rbNext;if(r)return this.leftBreakPoint(r,t);var n=e.site;return n.y===t?n.x:1/0},n.prototype.detachBeachsection=function(e){this.detachCircleEvent(e),this.beachline.rbRemoveNode(e),this.beachsectionJunkyard.push(e)},n.prototype.removeBeachsection=function(e){var t=e.circleEvent,r=t.x,n=t.ycenter,i=this.createVertex(r,n),o=e.rbPrevious,a=e.rbNext,f=[e],c=Math.abs;this.detachBeachsection(e);for(var s=o;s.circleEvent&&c(r-s.circleEvent.x)<1e-9&&c(n-s.circleEvent.ycenter)<1e-9;)o=s.rbPrevious,f.unshift(s),this.detachBeachsection(s),s=o;f.unshift(s),this.detachCircleEvent(s);for(var l=a;l.circleEvent&&c(r-l.circleEvent.x)<1e-9&&c(n-l.circleEvent.ycenter)<1e-9;)a=l.rbNext,f.push(l),this.detachBeachsection(l),l=a;f.push(l),this.detachCircleEvent(l);var u,h=f.length;for(u=1;u<h;u++)l=f[u],s=f[u-1],this.setEdgeStartpoint(l.edge,s.site,l.site,i);s=f[0],(l=f[h-1]).edge=this.createEdge(s.site,l.site,void 0,i),this.attachCircleEvent(s),this.attachCircleEvent(l)},n.prototype.addBeachsection=function(e){for(var t,r,n,i,o=e.x,a=e.y,f=this.beachline.root;f;)if((n=this.leftBreakPoint(f,a)-o)>1e-9)f=f.rbLeft;else{if(!((i=o-this.rightBreakPoint(f,a))>1e-9)){n>-1e-9?(t=f.rbPrevious,r=f):i>-1e-9?(t=f,r=f.rbNext):t=r=f;break}if(!f.rbRight){t=f;break}f=f.rbRight}var c=this.createBeachsection(e);if(this.beachline.rbInsertSuccessor(t,c),t||r){if(t===r)return this.detachCircleEvent(t),r=this.createBeachsection(t.site),this.beachline.rbInsertSuccessor(c,r),c.edge=r.edge=this.createEdge(t.site,c.site),this.attachCircleEvent(t),void this.attachCircleEvent(r);if(!t||r){if(t!==r){this.detachCircleEvent(t),this.detachCircleEvent(r);var s=t.site,l=s.x,u=s.y,h=e.x-l,b=e.y-u,d=r.site,p=d.x-l,g=d.y-u,y=2*(h*g-b*p),v=h*h+b*b,m=p*p+g*g,x=this.createVertex((g*v-b*m)/y+l,(h*m-p*v)/y+u);return this.setEdgeStartpoint(r.edge,s,d,x),c.edge=this.createEdge(s,e,void 0,x),r.edge=this.createEdge(e,d,void 0,x),this.attachCircleEvent(t),void this.attachCircleEvent(r)}}else c.edge=this.createEdge(t.site,c.site)}},n.prototype.CircleEvent=function(){this.arc=null,this.rbLeft=null,this.rbNext=null,this.rbParent=null,this.rbPrevious=null,this.rbRed=!1,this.rbRight=null,this.site=null,this.x=this.y=this.ycenter=0},n.prototype.attachCircleEvent=function(e){var t=e.rbPrevious,r=e.rbNext;if(t&&r){var n=t.site,i=e.site,o=r.site;if(n!==o){var a=i.x,f=i.y,c=n.x-a,s=n.y-f,l=o.x-a,u=o.y-f,h=2*(c*u-s*l);if(!(h>=-2e-12)){var b=c*c+s*s,d=l*l+u*u,p=(u*b-s*d)/h,g=(c*d-l*b)/h,y=g+f,v=this.circleEventJunkyard.pop();v||(v=new this.CircleEvent),v.arc=e,v.site=i,v.x=p+a,v.y=y+this.sqrt(p*p+g*g),v.ycenter=y,e.circleEvent=v;for(var m=null,x=this.circleEvents.root;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.rbLeft){m=x.rbPrevious;break}x=x.rbLeft}else{if(!x.rbRight){m=x;break}x=x.rbRight}this.circleEvents.rbInsertSuccessor(m,v),m||(this.firstCircleEvent=v)}}}},n.prototype.detachCircleEvent=function(e){var t=e.circleEvent;t&&(t.rbPrevious||(this.firstCircleEvent=t.rbNext),this.circleEvents.rbRemoveNode(t),this.circleEventJunkyard.push(t),e.circleEvent=null)},n.prototype.connectEdge=function(e,t){var r=e.vb;if(r)return!0;var n,i,o=e.va,a=t.xl,f=t.xr,c=t.yt,s=t.yb,l=e.lSite,u=e.rSite,h=l.x,b=l.y,d=u.x,p=u.y,g=(h+d)/2,y=(b+p)/2;if(this.cells[l.voronoiId].closeMe=!0,this.cells[u.voronoiId].closeMe=!0,p!==b&&(i=y-(n=(h-d)/(p-b))*g),void 0===n){if(g<a||g>=f)return!1;if(h>d){if(!o||o.y<c)o=this.createVertex(g,c);else if(o.y>=s)return!1;r=this.createVertex(g,s)}else{if(!o||o.y>s)o=this.createVertex(g,s);else if(o.y<c)return!1;r=this.createVertex(g,c)}}else if(n<-1||n>1)if(h>d){if(!o||o.y<c)o=this.createVertex((c-i)/n,c);else if(o.y>=s)return!1;r=this.createVertex((s-i)/n,s)}else{if(!o||o.y>s)o=this.createVertex((s-i)/n,s);else if(o.y<c)return!1;r=this.createVertex((c-i)/n,c)}else if(b<p){if(!o||o.x<a)o=this.createVertex(a,n*a+i);else if(o.x>=f)return!1;r=this.createVertex(f,n*f+i)}else{if(!o||o.x>f)o=this.createVertex(f,n*f+i);else if(o.x<a)return!1;r=this.createVertex(a,n*a+i)}return e.va=o,e.vb=r,!0},n.prototype.clipEdge=function(e,t){var r=e.va.x,n=e.va.y,i=0,o=1,a=e.vb.x-r,f=e.vb.y-n,c=r-t.xl;if(0===a&&c<0)return!1;var s=-c/a;if(a<0){if(s<i)return!1;s<o&&(o=s)}else if(a>0){if(s>o)return!1;s>i&&(i=s)}if(c=t.xr-r,0===a&&c<0)return!1;if(s=c/a,a<0){if(s>o)return!1;s>i&&(i=s)}else if(a>0){if(s<i)return!1;s<o&&(o=s)}if(c=n-t.yt,0===f&&c<0)return!1;if(s=-c/f,f<0){if(s<i)return!1;s<o&&(o=s)}else if(f>0){if(s>o)return!1;s>i&&(i=s)}if(c=t.yb-n,0===f&&c<0)return!1;if(s=c/f,f<0){if(s>o)return!1;s>i&&(i=s)}else if(f>0){if(s<i)return!1;s<o&&(o=s)}return i>0&&(e.va=this.createVertex(r+i*a,n+i*f)),o<1&&(e.vb=this.createVertex(r+o*a,n+o*f)),(i>0||o<1)&&(this.cells[e.lSite.voronoiId].closeMe=!0,this.cells[e.rSite.voronoiId].closeMe=!0),!0},n.prototype.clipEdges=function(e){for(var t,r=this.edges,n=r.length,i=Math.abs;n--;)t=r[n],(!this.connectEdge(t,e)||!this.clipEdge(t,e)||i(t.va.x-t.vb.x)<1e-9&&i(t.va.y-t.vb.y)<1e-9)&&(t.va=t.vb=null,r.splice(n,1))},n.prototype.closeCells=function(e){for(var t,r,n,i,o,a,f,c,s,l=e.xl,u=e.xr,h=e.yt,b=e.yb,d=this.cells,p=d.length,g=Math.abs;p--;)if((t=d[p]).prepareHalfedges()&&t.closeMe){for(i=(n=t.halfedges).length,r=0;r<i;){if(a=n[r].getEndpoint(),c=n[(r+1)%i].getStartpoint(),g(a.x-c.x)>=1e-9||g(a.y-c.y)>=1e-9)switch(!0){case this.equalWithEpsilon(a.x,l)&&this.lessThanWithEpsilon(a.y,b):if(s=this.equalWithEpsilon(c.x,l),f=this.createVertex(l,s?c.y:b),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;a=f;case this.equalWithEpsilon(a.y,b)&&this.lessThanWithEpsilon(a.x,u):if(s=this.equalWithEpsilon(c.y,b),f=this.createVertex(s?c.x:u,b),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;a=f;case this.equalWithEpsilon(a.x,u)&&this.greaterThanWithEpsilon(a.y,h):if(s=this.equalWithEpsilon(c.x,u),f=this.createVertex(u,s?c.y:h),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;a=f;case this.equalWithEpsilon(a.y,h)&&this.greaterThanWithEpsilon(a.x,l):if(s=this.equalWithEpsilon(c.y,h),f=this.createVertex(s?c.x:l,h),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;if(a=f,s=this.equalWithEpsilon(c.x,l),f=this.createVertex(l,s?c.y:b),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;if(a=f,s=this.equalWithEpsilon(c.y,b),f=this.createVertex(s?c.x:u,b),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;if(a=f,s=this.equalWithEpsilon(c.x,u),f=this.createVertex(u,s?c.y:h),o=this.createBorderEdge(t.site,a,f),r++,n.splice(r,0,this.createHalfedge(o,t.site,null)),i++,s)break;default:throw"Voronoi.closeCells() > this makes no sense!"}r++}t.closeMe=!1}},n.prototype.quantizeSites=function(e){for(var t,r=this.ε,n=e.length;n--;)(t=e[n]).x=Math.floor(t.x/r)*r,t.y=Math.floor(t.y/r)*r},n.prototype.recycle=function(e){if(e){if(!(e instanceof this.Diagram))throw"Voronoi.recycleDiagram() > Need a Diagram object.";this.toRecycle=e}},n.prototype.compute=function(e,t){var r=new Date;this.reset(),this.toRecycle&&(this.vertexJunkyard=this.vertexJunkyard.concat(this.toRecycle.vertices),this.edgeJunkyard=this.edgeJunkyard.concat(this.toRecycle.edges),this.cellJunkyard=this.cellJunkyard.concat(this.toRecycle.cells),this.toRecycle=null);var n=e.slice(0);n.sort(function(e,t){var r=t.y-e.y;return r||t.x-e.x});for(var i,o,a,f=n.pop(),c=0,s=this.cells;;)if(a=this.firstCircleEvent,f&&(!a||f.y<a.y||f.y===a.y&&f.x<a.x))f.x===i&&f.y===o||(s[c]=this.createCell(f),f.voronoiId=c++,this.addBeachsection(f),o=f.y,i=f.x),f=n.pop();else{if(!a)break;this.removeBeachsection(a.arc)}this.clipEdges(t),this.closeCells(t);var l=new Date,u=new this.Diagram;return u.cells=this.cells,u.edges=this.edges,u.vertices=this.vertices,u.execTime=l.getTime()-r.getTime(),this.reset(),u},e.exports=n},function(e,t,r){(function(t){var r="Expected a function",n=NaN,i="[object Symbol]",o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,c=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,h=l||u||Function("return this")(),b=Object.prototype.toString,d=Math.max,p=Math.min,g=function(){return h.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function v(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&b.call(e)==i}(e))return n;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var r=f.test(e);return r||c.test(e)?s(e.slice(2),r?2:8):a.test(e)?n:+e}e.exports=function(e,t,n){var i,o,a,f,c,s,l=0,u=!1,h=!1,b=!0;if("function"!=typeof e)throw new TypeError(r);function m(t){var r=i,n=o;return i=o=void 0,l=t,f=e.apply(n,r)}function x(e){var r=e-s;return void 0===s||r>=t||r<0||h&&e-l>=a}function R(){var e=g();if(x(e))return k(e);c=setTimeout(R,function(e){var r=t-(e-s);return h?p(r,a-(e-l)):r}(e))}function k(e){return c=void 0,b&&i?m(e):(i=o=void 0,f)}function w(){var e=g(),r=x(e);if(i=arguments,o=this,s=e,r){if(void 0===c)return function(e){return l=e,c=setTimeout(R,t),u?m(e):f}(s);if(h)return c=setTimeout(R,t),m(s)}return void 0===c&&(c=setTimeout(R,t)),f}return t=v(t)||0,y(n)&&(u=!!n.leading,a=(h="maxWait"in n)?d(v(n.maxWait)||0,t):a,b="trailing"in n?!!n.trailing:b),w.cancel=function(){void 0!==c&&clearTimeout(c),l=0,i=s=o=c=void 0},w.flush=function(){return void 0===c?f:k(g())},w}}).call(this,r(5))},function(e,t,r){"use strict";r.r(t);var n=r(2),i=r.n(n),o=r(1),a=r.n(o),f=r(0),c=r.n(f);const s=["PuOr","BrBG","PRGn","PiYG","RdBu"],l=s[Math.round(Math.random()*(s.length-1))];console.log("palette",l);const u=c.a.scale(l).mode("lab"),h=c.a.scale(l).mode("lab");var b=(e,t,r,n)=>{const i=((e,t)=>c.a.interpolate(u(e),h(t),.5,"lab").hex())(t,r);e.beginPath();const o=n[0].getStartpoint();e.moveTo(o.x,o.y);for(let t=0;t<n.length;t++){const r=n[t].getEndpoint();e.lineTo(r.x,r.y)}e.closePath(),e.fillStyle=i,e.fill(),e.strokeStyle=i,e.stroke()};let d=()=>2*document.body.scrollWidth,p=()=>2*document.body.scrollHeight;var g=()=>{const e=d(),t=p(),r=Math.sin(Math.PI/3),n=[];let i=0;for(let o=0;i<t;o++){let t=o%2?0:40;for(let r=0;t<e;r++)n.push({x:t,y:i,angle:Math.random()*(2*Math.PI)}),t+=80;i+=80*r}return n};document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".background"),t=e.getContext("2d"),r=new a.a;let n=2*document.body.scrollWidth,o=2*document.body.scrollHeight,f={xl:0,xr:n,yt:0,yb:o},c=null,s=null;e.style.opacity="1",console.log("canvas.style.opacity",e.style.opacity),e.width=n,e.height=o;const l=()=>{c=g()},u=()=>{s&&r.recycle(s),(e=>{for(const r of e.cells)b(t,r.site.x/n,r.site.y/o,r.halfedges)})(s=r.compute(c,f))};window.addEventListener("resize",i()(()=>{n=2*document.body.scrollWidth,o=2*document.body.scrollHeight,f={xl:0,xr:n,yt:0,yb:o},l(),e.width=n,e.height=o},100)),l(),u(),setTimeout(()=>{let e=performance.now();const t=r=>{requestAnimationFrame(t);const i=r-e;i<50||(e=r,(()=>{for(const e of c)e.x=e.x+10*Math.cos(e.angle)*.1,e.y=e.y+10*Math.sin(e.angle)*.1,(e.y<=0||e.y>=o)&&(e.angle=2*Math.PI-e.angle),(e.x<=0||e.x>=n)&&(e.angle=Math.PI-e.angle),e.y<=0&&(e.y=0),e.x<=0&&(e.x=0),e.y>=o&&(e.y=o),e.x>=n&&(e.x=n)})(),u())};t(e)},500)})},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r}]);